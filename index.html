<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>clang-tags &#x2013; User Manual</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="generator" content="Org-mode"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link type="text/css" href="http://orgmode.org/worg/style/worg.css" title="Standard" rel="stylesheet">
<link type="text/css" href="http://orgmode.org/worg/style/worg-zenburn.css" title="Zenburn" rel="alternate stylesheet">
<link type="text/css" href="http://orgmode.org/worg/style/worg-classic.css" title="Classic" rel="alternate stylesheet">
<style type="text/css">
html { background: white }
</style>
<style type="text/css">
#text-1 pre.src { float: left; margin-right: 3em }
#sec-1-1 { clear: both; }
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">clang-tags &#x2013; User Manual</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Introduction</a>
<ul>
<li><a href="#sec-1-1">1.1. Features</a></li>
<li><a href="#sec-1-2">1.2. First steps for the impatient</a></li>
<li><a href="#sec-1-3">1.3. Important notions &#x2013; Terminology</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Command-line interface</a>
<ul>
<li><a href="#sec-2-1">2.1. Creating the compilation database</a></li>
<li><a href="#sec-2-2">2.2. Indexing the source files</a></li>
<li><a href="#sec-2-3">2.3. Looking for symbols</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Emacs user interface</a>
<ul>
<li><a href="#sec-3-1">3.1. Find the definition of the symbol at point</a></li>
<li><a href="#sec-3-2">3.2. Find all uses of a definition in the source base</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Contributing</a></li>
<li><a href="#sec-5">5. See also</a></li>
</ul>
</div>
</div>
<p>
<code>clang-tags</code> is a C / C++ source code indexing tool. Unlike many other indexing tools, <code>clang-tags</code>
relies on the <a href="http://clang.llvm.org">clang</a> compiler (via the libclang interface) to analyse and index the source code base.
</p>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
Let us consider the following C++ code:
</p>

<div class="org-src-container">

<pre class="src src-c++"><span class="linenr"> 1: </span><span style="color: #7a378b;">#include</span> <span style="color: #8b2252;">"config.h"</span>
<span class="linenr"> 2: </span><span style="color: #7a378b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #7a378b;">#ifdef</span> DEBUG
<span id="coderef-debug1" class="coderef-off"><span class="linenr"> 5: </span><span style="color: #a020f0;">inline</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">debug</span> (<span style="color: #a020f0;">const</span> <span style="color: #228b22;">char</span>* <span style="color: #a0522d;">message</span>) {                <span style="color: #b22222;">//</span></span>
<span class="linenr"> 6: </span>  <span style="color: #008b8b;">std</span>::cerr &lt;&lt; message &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span><span style="color: #7a378b;">#else</span>
<span id="coderef-debug2" class="coderef-off"><span class="linenr"> 9: </span><span style="color: #a020f0;">inline</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">debug</span> (<span style="color: #a020f0;">const</span> <span style="color: #228b22;">char</span>* <span style="color: #a0522d;">message</span>) {}               <span style="color: #b22222;">//</span></span>
<span class="linenr">10: </span><span style="color: #7a378b;">#endif</span>
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #a020f0;">template</span> &lt;<span style="color: #a020f0;">typename</span> <span style="color: #228b22;">T</span>&gt; <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">MyClass</span> {
<span id="coderef-defCtor" class="coderef-off"><span class="linenr">13: </span>  <span style="color: #0000ff;">MyClass</span> () { debug (<span style="color: #8b2252;">"MyClass::MyClass"</span>); }             <span style="color: #b22222;">//</span></span>
<span class="linenr">14: </span>
<span id="coderef-defDisplayT" class="coderef-off"><span class="linenr">15: </span>  <span style="color: #228b22;">void</span> <span style="color: #0000ff;">display</span> () {                                      <span style="color: #b22222;">//</span></span>
<span class="linenr">16: </span>    <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"MyClass&lt;T&gt;::display()"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
<span class="linenr">17: </span>  }
<span class="linenr">18: </span>};
<span class="linenr">19: </span>
<span class="linenr">20: </span><span style="color: #a020f0;">template</span> &lt;&gt; <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">MyClass</span>&lt;<span style="color: #228b22;">int</span>&gt; {
<span id="coderef-defDisplayInt" class="coderef-off"><span class="linenr">21: </span>  <span style="color: #228b22;">void</span> <span style="color: #0000ff;">display</span> () {                                      <span style="color: #b22222;">//</span></span>
<span class="linenr">22: </span>    <span style="color: #008b8b;">std</span>::cout &lt;&lt; <span style="color: #8b2252;">"MyClass&lt;int&gt;::display()"</span> &lt;&lt; <span style="color: #008b8b;">std</span>::endl;
<span class="linenr">23: </span>  }
<span class="linenr">24: </span>};
<span class="linenr">25: </span>
<span class="linenr">26: </span><span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span> () {
<span id="coderef-display1" class="coderef-off"><span class="linenr">27: </span>  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">display</span> = 3;                                       <span style="color: #b22222;">//</span></span>
<span class="linenr">28: </span>
<span id="coderef-ctor" class="coderef-off"><span class="linenr">29: </span>  <span style="color: #228b22;">MyClass</span>&lt;<span style="color: #228b22;">double</span>&gt; <span style="color: #a0522d;">a</span>;                                     <span style="color: #b22222;">//</span></span>
<span id="coderef-display2" class="coderef-off"><span class="linenr">30: </span>  a.display();                                           <span style="color: #b22222;">//</span></span>
<span class="linenr">31: </span>
<span class="linenr">32: </span>  <span style="color: #228b22;">MyClass</span>&lt;<span style="color: #228b22;">int</span>&gt; <span style="color: #a0522d;">b</span>;
<span id="coderef-display3" class="coderef-off"><span class="linenr">33: </span>  b.display();                                           <span style="color: #b22222;">//</span></span>
<span class="linenr">34: </span>}
</pre>
</div>

<p>
A few difficulties can be found in this file, making indexing difficult without the help of a
full-fledged C++ compiler:
</p>

<ol class="org-ol">
<li>Depending on the <code>DEBUG</code> preprocessor macro, the definition of the function <code>debug</code> might be found
at line <a href="#coderef-debug1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-debug1');" onmouseout="CodeHighlightOff(this, 'coderef-debug1');">5</a> or <a href="#coderef-debug2"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-debug2');" onmouseout="CodeHighlightOff(this, 'coderef-debug2');">9</a>.
</li>

<li>The <code>display</code> identifier is used in several places to mean widely different things (for example
at lines <a href="#coderef-display1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-display1');" onmouseout="CodeHighlightOff(this, 'coderef-display1');">27</a> and <a href="#coderef-display2"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-display2');" onmouseout="CodeHighlightOff(this, 'coderef-display2');">30</a>). Context information is necessary to disambiguate uses of
the same identifier.
</li>

<li>Even when <code>display</code> refers to the method of template class <code>MyClass&lt;&gt;</code>, a precise knowledge of the
complex C++ template specialization rules is required to associate <a href="#coderef-display2"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-display2');" onmouseout="CodeHighlightOff(this, 'coderef-display2');">a.display()</a> with
<a href="#coderef-defDisplayT"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-defDisplayT');" onmouseout="CodeHighlightOff(this, 'coderef-defDisplayT');">MyClass&lt;T&gt;::display()</a> and <a href="#coderef-display3"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-display3');" onmouseout="CodeHighlightOff(this, 'coderef-display3');">b.display()</a> with <a href="#coderef-defDisplayInt"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-defDisplayInt');" onmouseout="CodeHighlightOff(this, 'coderef-defDisplayInt');">MyClass&lt;int&gt;::display()</a>.
</li>

<li>Some functions such as constructors or operators can be called without explicitly appearing in
the code. For example, the <a href="#coderef-defCtor"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-defCtor');" onmouseout="CodeHighlightOff(this, 'coderef-defCtor');">MyClass::MyClass()</a> constructor is called at line <a href="#coderef-ctor"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-ctor');" onmouseout="CodeHighlightOff(this, 'coderef-ctor');">29</a>.
</li>
</ol>


<p>
On the other hand, using a C++ compiler such as <code>clang</code> to parse this code and generate an AST
requires information about the project configuration and its build environment:
</p>

<ol class="org-ol">
<li>The <code>config.h</code> file could be automatically generated by <code>autoconf</code> or <code>CMake</code> and reside in a
completely different directory than other source files. The compiler will typically need to be
provided with <code>-I</code> command-line arguments to know where to find header files.
</li>

<li>The <code>DEBUG</code> macro could well be defined by the compilation command line (typically using a <code>-D</code>
switch).
</li>
</ol>

<p>
A compiler-based indexing tool thus needs to be aware of the full compilation commands which are
used to build the project, including for each source file:
</p>
<ul class="org-ul">
<li>the full list of command-line switches,
</li>
<li>the directory from which the file is compiled.
</li>
</ul>

<p>
Such information, which we will refer to as a "compilation database" in the following, is usually
found in the build system configuration, which can take a wide variety of forms: hand-crafted
<code>Makefile</code>, <code>autotools</code> project, <code>CMake</code> project, <i>etc.</i>
</p>
</div>


<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Features</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<code>clang-tags</code> aims at providing the following features:
</p>
<ol class="org-ol">
<li>generate a compilation database in a build-system-agnostic way,
</li>
<li>index the sources of the project,
</li>
<li>use this index to provide access to IDE-like features from a command-line
interface :
<ul class="org-ul">
<li>search for symbol definitions in the source code,
</li>
<li>search for symbol uses in the source code,
</li>
<li>auto-complete partially entered code,
</li>
</ul>
</li>
<li>integrate these features into Emacs.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> First steps for the impatient</h3>
<div class="outline-text-3" id="text-1-2">
<p>
All details are explained later, but the <a href="quickStart.html">quick start guide</a> provides a few
steps to get you started if you are too impatient to read.
</p>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Important notions &#x2013; Terminology</h3>
<div class="outline-text-3" id="text-1-3">
<p>
The following terms are used throughout this guide:
</p>

<dl class="org-dl">
<dt> Translation Unit </dt><dd>        A set of source code which is compiled together. Ordinarily, a translation units consists in
a preprocessed source file, in which all header files have been included, macros have been
expanded, and so on. In clang-tags a translation unit is identified by the set of
command-line arguments which would be needed to compile it into an object file.
</dd>

<dt> Definition       </dt><dd>        The place in the source code where a symbol is declared and/or defined. For each translation
unit, a given symbol only has one definition location. However, different definition
locations can be found for the same symbol across all translation units.  For example, the
definition of local variable <code>a</code> in function <code>main</code> of <code>main.cxx</code> appears at line <a href="#coderef-ctor"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-ctor');" onmouseout="CodeHighlightOff(this, 'coderef-ctor');">29</a>.
</dd>

<dt> Reference        </dt><dd>        Each occurrence of a symbol name in the source code is seen as a reference to its
definition. For example, the symbol <code>a</code> in expression <code>a.display()</code> on line <a href="#coderef-display2"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-display2');" onmouseout="CodeHighlightOff(this, 'coderef-display2');">30</a> is a
reference to the definition at line <a href="#coderef-ctor"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-ctor');" onmouseout="CodeHighlightOff(this, 'coderef-ctor');">29</a>.
</dd>

<dt> Spelling         </dt><dd>        In clang terminology, the name of a symbol as it appears in the source code is referred to
as its spelling. For example, the spelling of the symbol defined at line <a href="#coderef-ctor"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-ctor');" onmouseout="CodeHighlightOff(this, 'coderef-ctor');">29</a> is the
string "a".
</dd>

<dt> Unified Symbol Resolution (USR) </dt><dd>        A symbol can not be identified by its spelling only: context information is needed to
disambiguate uses of the same spelling in different scopes. In order to uniquely identify a
symbol across all translation units in a project, clang defines Unified Symbol
Resolutions. For example the USR of the <code>display</code> symbol referred to on line <a href="#coderef-display2"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-display2');" onmouseout="CodeHighlightOff(this, 'coderef-display2');">30</a> is
<code>c:MyClass&gt;#ddisplay#</code> whereas line <a href="#coderef-display3"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-display3');" onmouseout="CodeHighlightOff(this, 'coderef-display3');">33</a> refers to the symbol with USR
<code>c:MyClass&gt;#Idisplay#</code>
</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Command-line interface</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Creating the compilation database</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<code>clang-tags</code> uses a <a href="http://clang.llvm.org/docs/JSONCompilationDatabase.html">JSON compilation database</a> to get the information needed to correctly build the
project: compile directories and command-line switches. There are different ways to collect this
information.
</p>
</div>

<div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> From a <code>CMake</code> project</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
<code>CMake</code> (since version 2.8.5) supports the generation of a compilation database with the option
<code>CMAKE_EXPORT_COMPILE_COMMANDS</code>. For a <code>CMake</code>-managed project, creating the compilation database is
thus as simple as:
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=1 ../src
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2"><span class="section-number-4">2.1.2</span> Tracing the standard build process</h4>
<div class="outline-text-4" id="text-2-1-2">
<div class="org-src-container">

<pre class="src src-fundamental">usage: clang-tags trace [-h] ...

Create a compilation database by tracing a build command.

positional arguments:
  COMMAND     build command line

optional arguments:
  -h, --help  show this help message and exit
</pre>
</div>

<p>
For non <code>CMake</code>-managed projects, there is no "free" way to build the compilation database. One
way to get the necessary information consists in inspecting the build process as a black box
using <a href="http://linux.die.net/man/1/strace"><code>strace(1)</code></a> (also see <a href="https://github.com/rizsotto/Bear"><code>Bear</code></a> for a tool using <code>LD_PRELOAD</code> to implement the same kind of
strategy).
</p>

<p>
Such a method is inherently independent of the build process: Makefile (possibly
autotools-generated), shell or python script, &#x2026; However, the downside with this approach is
that <code>make</code> and other build systems traditionally only rebuild what's needed, and the generated
compilation database can thus be incomplete. Such methods also depend on platform-specific
features to inspect the build process.
</p>

<p>
Example usage:
</p>
<div class="org-src-container">

<pre class="src src-sh">make clean
clang-tags trace make
</pre>
</div>
<div class="org-src-container">

<pre class="src src-fundamental">rm -f main.o
g++ -c -o main.o ../src/main.cxx
g++ -o main main.o
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-1-3" class="outline-4">
<h4 id="sec-2-1-3"><span class="section-number-4">2.1.3</span> Scanning the sources directory</h4>
<div class="outline-text-4" id="text-2-1-3">
<div class="org-src-container">

<pre class="src src-fundamental">usage: clang-tags scan [-h] [--compiler COMPILER] srcdir ...

Create a compilation database by scanning a source directory

positional arguments:
  srcdir                top sources directory
  CLANG_ARGS            additional clang command-line arguments

optional arguments:
  -h, --help            show this help message and exit
  --compiler COMPILER, -c COMPILER
                        compiler name (default: gcc)
</pre>
</div>

<p>
For relatively simple projects, it can be sufficient to simply scan the top sources directory to
find all <code>*.c</code> or <code>*.cxx</code> files, and additionally provide <code>clang-tags</code> with a set of command-line
arguments necessary for <code>clang</code> to parse these files.
</p>

<p>
Example usage:
</p>
<div class="org-src-container">

<pre class="src src-sh">clang-tags scan ../src -- -I.
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Indexing the source files</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1"><span class="section-number-4">2.2.1</span> Creating the index</h4>
<div class="outline-text-4" id="text-2-2-1">
<div class="org-src-container">

<pre class="src src-fundamental">usage: clang-tags index [-h] [--exclude DIR] [--exclude-clear]

Create an index of all tags in the source code base. Source files and compilation commands
are taken from a clang <span style="color: #8b2252;">"compilation database"</span> in JSON format, previously read using the
<span style="color: #8b2252;">"load"</span> subcommand.

optional arguments:
  -h, --help            show this help message and exit
  --exclude DIR, -e DIR
                        do not index files under DIR
  --exclude-clear, -E   reset exclude list
</pre>
</div>

<p>
This command uses the compilation database to index all source files.
</p>
<p>
Example usage:
</p>
<div class="org-src-container">

<pre class="src src-sh">clang-tags index
</pre>
</div>
<div class="org-src-container">

<pre class="src src-fundamental">Server response:

-- Indexing project
/home/francois/projets/git/clang-tags/build/tests/src/main.cxx:
  parsing...    0.163754s.
  indexing...
    /home/francois/projets/git/clang-tags/build/tests/src/config.h
  indexing...   0.024179s.
0.311464s.
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2"><span class="section-number-4">2.2.2</span> Updating the index</h4>
<div class="outline-text-4" id="text-2-2-2">
<div class="org-src-container">

<pre class="src src-fundamental">usage: clang-tags update [-h]

Update the source code base index, using the same arguments as previous call to `index'

optional arguments:
  -h, --help  show this help message and exit
</pre>
</div>

<p>
This command updates the index.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Looking for symbols</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> Finding the definition of a symbol</h4>
<div class="outline-text-4" id="text-2-3-1">
<div class="org-src-container">

<pre class="src src-fundamental">usage: clang-tags find-def [-h] [--index] [--recompile] FILE_NAME OFFSET

Find the definition location of an identifier in a source file.

positional arguments:
  FILE_NAME        source file name
  OFFSET           offset in bytes

optional arguments:
  -h, --help       show this help message and exit
  --index, -i      look for the definition in the index
  --recompile, -r  recompile the file to find the definition
</pre>
</div>

<p>
Example usage:
</p>
<div class="org-src-container">

<pre class="src src-sh">clang-tags find-def -i ../src/main.cxx 942
</pre>
</div>
<div class="org-src-container">

<pre class="src src-ct/find-def-rw">Server response:
-- display -- MemberRefExpr display
   <span style="color: #ffa500; font-weight: bold; text-decoration: underline;">../src/main.cxx</span><span style="text-decoration: underline;">:</span><span style="color: #a0522d; text-decoration: underline;">21</span><span style="text-decoration: underline;">-</span><span style="color: #a0522d; text-decoration: underline;">23</span><span style="text-decoration: underline;">:</span><span style="color: #228b22; text-decoration: underline;">8</span><span style="text-decoration: underline;">-</span><span style="color: #228b22; text-decoration: underline;">3</span>: display
   c:@S@MyClass&gt;#I@F@display#

-- b.display() -- CallExpr display
   <span style="color: #ffa500; font-weight: bold; text-decoration: underline;">../src/main.cxx</span><span style="text-decoration: underline;">:</span><span style="color: #a0522d; text-decoration: underline;">21</span><span style="text-decoration: underline;">-</span><span style="color: #a0522d; text-decoration: underline;">23</span><span style="text-decoration: underline;">:</span><span style="color: #228b22; text-decoration: underline;">8</span><span style="text-decoration: underline;">-</span><span style="color: #228b22; text-decoration: underline;">3</span>: display
   c:@S@MyClass&gt;#I@F@display#

-- main () { int display = 3; //(ref:displ... -- FunctionDecl main
   <span style="color: #ffa500; font-weight: bold; text-decoration: underline;">../src/main.cxx</span><span style="text-decoration: underline;">:</span><span style="color: #a0522d; text-decoration: underline;">26</span><span style="text-decoration: underline;">-</span><span style="color: #a0522d; text-decoration: underline;">34</span><span style="text-decoration: underline;">:</span><span style="color: #228b22; text-decoration: underline;">5</span><span style="text-decoration: underline;">-</span><span style="color: #228b22; text-decoration: underline;">1</span>: main
   c:@F@main
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-2" class="outline-4">
<h4 id="sec-2-3-2"><span class="section-number-4">2.3.2</span> Looking for all references to a symbol</h4>
<div class="outline-text-4" id="text-2-3-2">
<div class="org-src-container">

<pre class="src src-fundamental">usage: clang-tags grep [-h] USR

Find all uses of a definition, identified by its USR (Unified Symbol Resolution). Outputs
results in a grep-like format.

positional arguments:
  USR         USR for the definition

optional arguments:
  -h, --help  show this help message and exit
</pre>
</div>

<p>
Example usage:
</p>
<div class="org-src-container">

<pre class="src src-sh">clang-tags grep <span style="color: #8b2252;">'c:@S@MyClass&gt;#I@F@display#'</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-grep-rw">Server response:
<span id="coderef-defDisplayInt" class="coderef-off"><span style="color: #00cd00; font-weight: bold; text-decoration: underline;">../src/main.cxx</span><span style="text-decoration: underline;">:</span><span style="color: #a0522d; text-decoration: underline;">21</span><span style="text-decoration: underline;">:</span>  void display () {                                      // (defDisplayInt)</span>
<span id="coderef-display3" class="coderef-off"><span style="color: #00cd00; font-weight: bold; text-decoration: underline;">../src/main.cxx</span><span style="text-decoration: underline;">:</span><span style="color: #a0522d; text-decoration: underline;">33</span><span style="text-decoration: underline;">:</span>  b.display();                                           // (display3)</span>
<span id="coderef-display3" class="coderef-off"><span style="color: #00cd00; font-weight: bold; text-decoration: underline;">../src/main.cxx</span><span style="text-decoration: underline;">:</span><span style="color: #a0522d; text-decoration: underline;">33</span><span style="text-decoration: underline;">:</span>  b.display();                                           // (display3)</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Emacs user interface</h2>
<div class="outline-text-2" id="text-3">
<p>
First, load the package using <code>M-x load-file RET path/to/clang-tags.el RET</code>
</p>

<p>
With the configuration file generated by the <code>clang-tags index</code> command, all
C/C++ source files in the indexed source directory should automatically
activate <code>clang-tags-mode</code> and have the <code>ct/default-directory</code> variable point
to the index directory.
</p>
</div>


<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Find the definition of the symbol at point</h3>
<div class="outline-text-3" id="text-3-1">
<p>
While in a source buffer, you can use <code>clang-tags</code> to find the location of
the definition of the symbol under point by pressing <code>M-&lt;dot&gt;</code>.
</p>

<p>
The list of relevant definitions is presented in a buffer, where pressing
<code>RET</code> will take you to the location of the definition.
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Find all uses of a definition in the source base</h3>
<div class="outline-text-3" id="text-3-2">
<p>
After having looked for a definition of the symbol under point, and while in
the definitions list buffer, press <code>M-&lt;comma&gt;</code> to list all uses of the
current definition in the source code base.
</p>

<p>
Results are presented in a <code>grep-mode</code> buffer.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Contributing</h2>
<div class="outline-text-2" id="text-4">
<p>
Please do!
</p>

<p>
If you make improvements to this code or have suggestions, please do not
hesitate to fork the repository or submit bug reports on
<a href="https://github.com/ffevotte/clang-tags">github</a>. The repository's URL is:
</p>

<p>
<a href="https://github.com/ffevotte/clang-tags.el.git">https://github.com/ffevotte/clang-tags.el.git</a>
</p>


<p>
A doxygen documentation targeted at developers is available <a href="doxygen/index.html">here</a>.
</p>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> See also</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li><a href="http://clang.llvm.org/doxygen/group__CINDEX.html">libclang API documentation</a>
</li>
<li><a href="http://llvm.org/devmtg/2010-11/Gregor-libclang.pdf">Doug Gregor's presentation on libclang</a>
</li>
<li><a href="https://github.com/drothlis/clang-ctags">clang-ctags</a>: a similar project
using libclang to generate <code>ctags</code> / <code>etags</code> index files.
</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 23.3.1 (<a href="http://orgmode.org">Org</a> mode 8.0.6)</p>
<p class="xhtml-validation"><a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a></p>
</div>
</body>
</html>
